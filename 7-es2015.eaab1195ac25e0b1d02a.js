(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{KppW:function(e,t,i){"use strict";i.r(t);var s=i("tyNb"),n=i("tk/3"),c=i("AytR"),a=i("z6cu"),r=i("JIr8"),o=i("fXoL");let l=(()=>{class e{constructor(e){this.http=e,this.URL=c.a.baseUrl+"/top-headlines"}getHeadlines(e,t=1){let i=new n.d;return i=i.set("q",e.topic),i=i.set("pageSize",e.pageSize.toString()),i=i.set("page",t.toString()),i=i.append("category",e.category),i=i.append("country",e.country),this.http.get(this.URL,{params:i}).pipe(Object(r.a)(e=>Object(a.a)(e)))}}return e.\u0275fac=function(t){return new(t||e)(o.Zb(n.b))},e.\u0275prov=o.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var b=i("2Vo4"),u=i("lJxs"),h=i("7o/Q");function d(e){return t=>t.lift(new p(e))}class p{constructor(e){this.total=e}call(e,t){return t.subscribe(new f(e,this.total))}}class f extends h.a{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){++this.count>this.total&&this.destination.next(e)}}var g=i("/uUt"),m=i("XNiG"),v=i("3N8a");class R extends v.a{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,i=0){return null!==i&&i>0||null===i&&this.delay>0?super.requestAsyncId(e,t,i):e.flush(this)}}var w=i("IjjT");class y extends w.a{}const Q=new y(R);var I=i("quSY"),x=i("WMd4");class z extends h.a{constructor(e,t,i=0){super(e),this.scheduler=t,this.delay=i}static dispatch(e){const{notification:t,destination:i}=e;t.observe(i),this.unsubscribe()}scheduleMessage(e){this.destination.add(this.scheduler.schedule(z.dispatch,this.delay,new S(e,this.destination)))}_next(e){this.scheduleMessage(x.a.createNext(e))}_error(e){this.scheduleMessage(x.a.createError(e)),this.unsubscribe()}_complete(){this.scheduleMessage(x.a.createComplete()),this.unsubscribe()}}class S{constructor(e,t){this.notification=e,this.destination=t}}var O=i("9ppp"),_=i("Ylt2");class B extends m.a{constructor(e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,i){super(),this.scheduler=i,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){const t=this._events;t.push(e),t.length>this._bufferSize&&t.shift(),super.next(e)}nextTimeWindow(e){this._events.push(new N(this._getNow(),e)),this._trimBufferThenGetEvents(),super.next(e)}_subscribe(e){const t=this._infiniteTimeWindow,i=t?this._events:this._trimBufferThenGetEvents(),s=this.scheduler,n=i.length;let c;if(this.closed)throw new O.a;if(this.isStopped||this.hasError?c=I.a.EMPTY:(this.observers.push(e),c=new _.a(this,e)),s&&e.add(e=new z(e,s)),t)for(let a=0;a<n&&!e.closed;a++)e.next(i[a]);else for(let a=0;a<n&&!e.closed;a++)e.next(i[a].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),c}_getNow(){return(this.scheduler||Q).now()}_trimBufferThenGetEvents(){const e=this._getNow(),t=this._bufferSize,i=this._windowTime,s=this._events,n=s.length;let c=0;for(;c<n&&!(e-s[c].time<i);)c++;return n>t&&(c=Math.max(c,n-t)),c>0&&s.splice(0,c),s}}class N{constructor(e,t){this.time=e,this.value=t}}function j(e,t,i){let s;return s=e&&"object"==typeof e?e:{bufferSize:e,windowTime:t,refCount:!1,scheduler:i},e=>e.lift(function({bufferSize:e=Number.POSITIVE_INFINITY,windowTime:t=Number.POSITIVE_INFINITY,refCount:i,scheduler:s}){let n,c,a=0,r=!1,o=!1;return function(l){a++,n&&!r||(r=!1,n=new B(e,t,s),c=l.subscribe({next(e){n.next(e)},error(e){r=!0,n.error(e)},complete(){o=!0,c=void 0,n.complete()}}));const b=n.subscribe(this);this.add(()=>{a--,b.unsubscribe(),c&&!o&&i&&0===a&&(c.unsubscribe(),c=void 0,n=void 0)})}}(s))}var T=i("JX91"),C=i("eIep"),P=i("vkgz");let k={headlines:{articles:[],status:"",totalResults:0},searchCriteria:{category:"general",pageSize:20,country:"us",topic:""},page:1},$=(()=>{class e{constructor(e){this.headlinesService=e,this.store=new b.a(k),this.state$=this.store.asObservable(),this.articles$=this.state$.pipe(Object(u.a)(e=>e.headlines.articles),d(1),Object(g.a)(),j(1)),this.totalResults$=this.state$.pipe(Object(u.a)(e=>e.headlines.totalResults),Object(g.a)(),j(1)),this.searchCriteria$=this.state$.pipe(Object(u.a)(e=>e.searchCriteria),Object(g.a)(),j(1)),this.page$=this.state$.pipe(Object(u.a)(e=>e.page),Object(g.a)(),j(1)),this.page$.pipe(d(1),Object(T.a)(0),Object(C.a)(()=>this.headlinesService.getHeadlines(k.searchCriteria,k.page).pipe(Object(P.a)(e=>{this.updateHeadlines(e)})))).subscribe()}updateHeadlines(e){this.store.next(k=Object.assign(Object.assign({},k),{headlines:e}))}updateSearchCriteria(e){this.store.next(k=Object.assign(Object.assign({},k),{searchCriteria:e}))}pageIncrease(){const e=++k.page;this.store.next(k=Object.assign(Object.assign({},k),{page:e}))}pageDecrease(){const e=--k.page;this.store.next(k=Object.assign(Object.assign({},k),{page:e}))}}return e.\u0275fac=function(t){return new(t||e)(o.Zb(l))},e.\u0275prov=o.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var M=i("nYR2"),F=i("3Pt+"),H=i("D0XW");class E{constructor(e,t){this.dueTime=e,this.scheduler=t}call(e,t){return t.subscribe(new V(e,this.dueTime,this.scheduler))}}class V extends h.a{constructor(e,t,i){super(e),this.dueTime=t,this.scheduler=i,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(D,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:e}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}}clearDebounce(){const e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)}}function D(e){e.debouncedNext()}let G=(()=>{class e{constructor(e){this.fb=e,this.minPageSize=1,this.maxPageSize=100,this.defaultPageSize=20,this.multiple=!0,this.receiveHeadlines=new o.n}ngOnInit(){this.form=this.fb.group({topic:[""],category:["general"],country:["us"],pageSize:[this.defaultPageSize,F.n.compose([F.n.min(this.minPageSize),F.n.max(this.maxPageSize)])]}),this.form.valueChanges.pipe(Object(g.a)(),function(e,t=H.a){return i=>i.lift(new E(e,t))}(100)).subscribe(e=>{this.receiveHeadlines.emit(e)})}}return e.\u0275fac=function(t){return new(t||e)(o.Mb(F.b))},e.\u0275cmp=o.Gb({type:e,selectors:[["app-headlines-form"]],outputs:{receiveHeadlines:"receiveHeadlines"},decls:57,vars:6,consts:[[3,"formGroup"],[1,"container"],[1,"row"],[1,"col-md-6"],[1,"form-group"],["for","topic"],["formControlName","topic","type","text","id","topic","placeholder","Enter topic:",1,"form-control"],["for","category-select"],["value","general","formControlName","category","id","category-select",1,"form-control",3,"multiple"],["value","general","selected",""],["value","business"],["value","entertainment"],["value","gaming"],["value","music"],["value","politics"],["value","health-and-medical"],["value","science-and-nature"],["value","sport"],["value","technology"],["for","country-select"],["value","us","formControlName","country","id","country-select",1,"form-control",3,"multiple"],["value","us","selected",""],["value","ae"],["value","ar"],["value","rs"],["value","de"],["value","gb"],["value","hu"],["value","ro"],["for","page-size"],["type","number","formControlName","pageSize","id","page-size","placeholder","Page size:",1,"form-control",3,"min","max","value"]],template:function(e,t){1&e&&(o.Rb(0,"form",0),o.Rb(1,"div",1),o.Rb(2,"div",2),o.Rb(3,"div",3),o.Rb(4,"div",4),o.Rb(5,"label",5),o.Bc(6,"Topic: "),o.Qb(),o.Nb(7,"input",6),o.Qb(),o.Rb(8,"div",4),o.Rb(9,"label",7),o.Bc(10,"Category: "),o.Qb(),o.Rb(11,"select",8),o.Rb(12,"option",9),o.Bc(13,"General"),o.Qb(),o.Rb(14,"option",10),o.Bc(15,"Business"),o.Qb(),o.Rb(16,"option",11),o.Bc(17,"Entertainment"),o.Qb(),o.Rb(18,"option",12),o.Bc(19,"Gaming"),o.Qb(),o.Rb(20,"option",13),o.Bc(21,"Music"),o.Qb(),o.Rb(22,"option",14),o.Bc(23,"Politics"),o.Qb(),o.Rb(24,"option",15),o.Bc(25,"Health and medical"),o.Qb(),o.Rb(26,"option",16),o.Bc(27,"Science and nature"),o.Qb(),o.Rb(28,"option",17),o.Bc(29,"Sport"),o.Qb(),o.Rb(30,"option",18),o.Bc(31,"Technology"),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Rb(32,"div",3),o.Rb(33,"div",4),o.Rb(34,"label",19),o.Bc(35,"Country: "),o.Qb(),o.Rb(36,"select",20),o.Rb(37,"option",21),o.Bc(38,"United States of America"),o.Qb(),o.Rb(39,"option",22),o.Bc(40,"United Arab Emirates"),o.Qb(),o.Rb(41,"option",23),o.Bc(42,"Argentina"),o.Qb(),o.Rb(43,"option",24),o.Bc(44,"Serbia"),o.Qb(),o.Rb(45,"option",25),o.Bc(46,"Germany"),o.Qb(),o.Rb(47,"option",26),o.Bc(48,"United Kingdom of Great Britain and Northern Ireland"),o.Qb(),o.Rb(49,"option",27),o.Bc(50,"Hungary"),o.Qb(),o.Rb(51,"option",28),o.Bc(52,"Romania"),o.Qb(),o.Qb(),o.Qb(),o.Rb(53,"div",4),o.Rb(54,"label",29),o.Bc(55,"Page size"),o.Qb(),o.Nb(56,"input",30),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb()),2&e&&(o.lc("formGroup",t.form),o.zb(11),o.lc("multiple",t.multiple),o.zb(25),o.lc("multiple",t.multiple),o.zb(20),o.lc("min",t.minPageSize)("max",t.maxPageSize)("value",t.defaultPageSize))},directives:[F.p,F.i,F.d,F.a,F.h,F.c,F.m,F.j,F.o,F.k],styles:[""],changeDetection:0}),e})();var W=i("ofXK");function Y(e,t){1&e&&(o.Rb(0,"h1"),o.Bc(1,"Please wait"),o.Qb())}function A(e,t){if(1&e&&(o.Rb(0,"article",9),o.Rb(1,"div",2),o.Rb(2,"div",10),o.Rb(3,"a",11),o.Nb(4,"img",12),o.Qb(),o.Qb(),o.Rb(5,"div",13),o.Rb(6,"div",14),o.Rb(7,"h5",15),o.Rb(8,"span",16),o.Bc(9),o.gc(10,"number"),o.Qb(),o.Rb(11,"a",11),o.Bc(12),o.Qb(),o.Qb(),o.Rb(13,"div",17),o.Rb(14,"p"),o.Rb(15,"strong"),o.Bc(16),o.Qb(),o.Qb(),o.Rb(17,"p"),o.Rb(18,"strong"),o.Bc(19),o.Qb(),o.Qb(),o.Rb(20,"p"),o.Rb(21,"strong"),o.Bc(22),o.gc(23,"date"),o.Qb(),o.Qb(),o.Qb(),o.Rb(24,"p",18),o.Bc(25),o.Qb(),o.Rb(26,"a",19),o.Bc(27,"Read the article"),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Nb(28,"hr"),o.Qb()),2&e){const e=t.$implicit,i=t.index;o.lc("id",e.title),o.zb(3),o.lc("href",e.url,o.uc),o.zb(1),o.lc("src",e.urlToImage,o.uc)("title",e.title)("alt",e.title),o.zb(5),o.Cc(o.hc(10,13,i+1)),o.zb(2),o.lc("href",e.url,o.uc),o.zb(1),o.Cc(e.title),o.zb(4),o.Dc("Source: ",e.source.name,""),o.zb(3),o.Dc("Author: ",e.author,""),o.zb(3),o.Cc(o.ic(23,15,e.publishedAt,"mediumDate")),o.zb(3),o.Cc(e.description),o.zb(1),o.lc("href",e.url,o.uc)}}function J(e,t){if(1&e&&(o.Rb(0,"section",null,7),o.zc(2,A,29,18,"article",8),o.Qb()),2&e){const e=t.ngIf;o.zb(2),o.lc("ngForOf",e)}}function U(e,t){if(1&e){const e=o.Sb();o.Rb(0,"button",23),o.dc("click",(function(){o.tc(e);const t=o.fc(2),i=o.sc(1);return t.pageDecrease(i)})),o.Bc(1," Load less "),o.Qb()}}function K(e,t){if(1&e){const e=o.Sb();o.Rb(0,"button",24),o.dc("click",(function(){o.tc(e);const t=o.fc(2),i=o.sc(1);return t.pageIncrease(i)})),o.Bc(1," Load more "),o.Qb()}}function L(e,t){if(1&e&&(o.Rb(0,"div",20),o.zc(1,U,2,0,"button",21),o.gc(2,"async"),o.zc(3,K,2,0,"button",22),o.gc(4,"async"),o.Qb()),2&e){const e=t.ngIf,i=o.fc();o.zb(1),o.lc("ngIf",o.hc(2,2,i.page$)>1),o.zb(2),o.lc("ngIf",e.length===o.hc(4,4,i.pageSize$))}}const X=[{path:"",component:(()=>{class e{constructor(e,t){this.headlinesService=e,this.headlinesFacade=t,this.showSpinner=!1,this.headlines$=this.headlinesFacade.articles$.pipe(d(1)),this.totalResults$=this.headlinesFacade.totalResults$,this.page$=this.headlinesFacade.page$,this.pageSize$=this.headlinesFacade.searchCriteria$.pipe(Object(u.a)(e=>e.pageSize))}receiveHeadlines(e){this.showSpinner=!0,this.headlinesFacade.updateSearchCriteria(e),this.headlinesService.getHeadlines(e).pipe(Object(P.a)(e=>{this.headlinesFacade.updateHeadlines(e)}),Object(M.a)(()=>{this.showSpinner=!1})).subscribe()}pageIncrease(e){e.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"}),this.headlinesFacade.pageIncrease()}pageDecrease(e){e.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"}),this.headlinesFacade.pageDecrease()}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(o.Mb(l),o.Mb($))},e.\u0275cmp=o.Gb({type:e,selectors:[["app-headlines"]],decls:10,vars:7,consts:[[1,"py-5"],["form",""],[1,"row"],[1,"col-xs-12","col-sm-10","offset-sm-1","col-md-6","offset-md-3"],[3,"receiveHeadlines"],[4,"ngIf"],["class","page-buttons",4,"ngIf"],["headlines_section",""],["class","articles",3,"id",4,"ngFor","ngForOf"],[1,"articles",3,"id"],[1,"col-md-7"],[3,"href"],["loading","lazy",1,"img-fluid","img-thumbnail","rounded","mx-auto","d-block","border","border-light",3,"src","title","alt"],[1,"col-md-5"],[1,"article"],[1,"text-center","d-flex","justify-content-between","align-items-center","mb-2"],[1,"badge","badge-dark","align-self-start"],[1,"mb-2"],[1,"mb-2","lead"],[1,"btn","btn-outline-primary",3,"href"],[1,"page-buttons"],["type","button","class","btn btn-primary float-left",3,"click",4,"ngIf"],["type","button","class","btn btn-primary float-right",3,"click",4,"ngIf"],["type","button",1,"btn","btn-primary","float-left",3,"click"],["type","button",1,"btn","btn-primary","float-right",3,"click"]],template:function(e,t){1&e&&(o.Rb(0,"section",0,1),o.Rb(2,"div",2),o.Rb(3,"div",3),o.Rb(4,"app-headlines-form",4),o.dc("receiveHeadlines",(function(e){return t.receiveHeadlines(e)})),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.zc(5,Y,2,0,"h1",5),o.zc(6,J,3,1,"section",5),o.gc(7,"async"),o.zc(8,L,5,6,"div",6),o.gc(9,"async")),2&e&&(o.zb(5),o.lc("ngIf",t.showSpinner),o.zb(1),o.lc("ngIf",o.hc(7,3,t.headlines$)),o.zb(2),o.lc("ngIf",o.hc(9,5,t.headlines$)))},directives:[G,W.m,W.l],pipes:[W.b,W.f,W.e],styles:['.sk-circle[_ngcontent-%COMP%]   .sk-child[_ngcontent-%COMP%]:before{background-color:#fff}img[_ngcontent-%COMP%]:before{content:"We\'re sorry, this image is broken :(";display:block;margin-bottom:10px}.article[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-pack:justify;justify-content:space-between;height:100%}.article[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%], .article[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}'],changeDetection:0}),e})()}];let q=(()=>{class e{}return e.\u0275mod=o.Kb({type:e}),e.\u0275inj=o.Jb({factory:function(t){return new(t||e)},imports:[[s.g.forChild(X)],s.g]}),e})();var Z=i("PCNd");i.d(t,"HeadlinesModule",(function(){return ee}));let ee=(()=>{class e{}return e.\u0275mod=o.Kb({type:e}),e.\u0275inj=o.Jb({factory:function(t){return new(t||e)},imports:[[Z.a,q]]}),e})()}}]);