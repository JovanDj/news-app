(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{KppW:function(e,t,i){"use strict";i.r(t),i.d(t,"HeadlinesModule",(function(){return F}));var a=i("tyNb"),c=i("2Vo4"),n=i("itXk"),s=i("lJxs"),r=i("/uUt"),o=i("eIep"),l=i("vkgz"),b=i("tk/3"),p=i("z6cu"),u=i("UXun"),h=i("JIr8"),g=i("AytR"),d=i("fXoL");let m=(()=>{class e{constructor(e){this.http=e,this.URL=g.a.baseUrl+"/top-headlines"}getHeadlines(e){const t=(new b.d).set("q",e.topic).set("pageSize",e.pageSize.toString()).set("page",e.page.toString()).set("category",e.category).set("country",e.country);return this.http.get(this.URL,{params:t}).pipe(Object(u.a)(),Object(h.a)(e=>Object(p.a)(e)))}}return e.\u0275fac=function(t){return new(t||e)(d.Xb(b.b))},e.\u0275prov=d.Gb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),f={headlines:{articles:[],status:"",totalResults:0},searchCriteria:{category:"general",pageSize:10,country:"us",topic:"",page:1},loading:!1},O=(()=>{class e{constructor(e){this.headlinesService=e,this.store=new c.a(f),this.state$=this.store.asObservable(),this.state$.subscribe(e=>console.log(e)),this.headlines$=this.state$.pipe(Object(s.a)(e=>e.headlines),Object(r.a)()),this.searchCriteria$=this.state$.pipe(Object(s.a)(e=>e.searchCriteria),Object(r.a)()),this.page$=this.state$.pipe(Object(s.a)(e=>e.searchCriteria.page),Object(r.a)()),this.loading$=this.state$.pipe(Object(s.a)(e=>e.loading),Object(r.a)()),this.vm$=Object(n.a)(this.headlines$,this.searchCriteria$,this.page$,this.loading$).pipe(Object(s.a)(([e,t,i,a])=>({headlines:e,searchCriteria:t,page:i,loading:a}))),Object(n.a)(this.searchCriteria$).pipe(Object(o.a)(([e])=>(console.log(e),this.headlinesService.getHeadlines(e))),Object(l.a)(e=>{this.updateState(Object.assign(Object.assign({},f),{headlines:e,loading:!1}))})).subscribe()}updateHeadlines(e){this.updateState(Object.assign(Object.assign({},f),{headlines:e,loading:!0}))}updateSearchCriteria(e){const t=Object.assign(Object.assign({},e),{page:f.searchCriteria.page});this.updateState(Object.assign(Object.assign({},f),{searchCriteria:t,loading:!0}))}pageIncrease(){const e=f.searchCriteria.page+1;this.updateState(Object.assign(Object.assign({},f),{searchCriteria:Object.assign(Object.assign({},f.searchCriteria),{page:e})}))}pageDecrease(){const e=f.searchCriteria.page-1;this.updateState(Object.assign(Object.assign({},f),{searchCriteria:Object.assign(Object.assign({},f.searchCriteria),{page:e})}))}updateState(e){this.store.next(f=e)}}return e.\u0275fac=function(t){return new(t||e)(d.Xb(m))},e.\u0275prov=d.Gb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var y=i("3Pt+"),P=i("7o/Q"),v=i("D0XW");class C{constructor(e,t){this.dueTime=e,this.scheduler=t}call(e,t){return t.subscribe(new x(e,this.dueTime,this.scheduler))}}class x extends P.a{constructor(e,t,i){super(e),this.dueTime=t,this.scheduler=i,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(S,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:e}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}}clearDebounce(){const e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)}}function S(e){e.debouncedNext()}let j=(()=>{class e{constructor(e){this.fb=e,this.minPageSize=1,this.maxPageSize=100,this.defaultPageSize=10,this.multiple=!0,this.formChange=new d.n,this.formInit(),this.form.valueChanges.pipe(function(e,t=v.a){return i=>i.lift(new C(e,t))}(400),Object(r.a)(),Object(l.a)(e=>{this.formChange.emit(e)})).subscribe()}formInit(){this.form=this.fb.group({topic:[""],category:["general"],country:["us"],pageSize:[this.defaultPageSize,y.n.compose([y.n.min(this.minPageSize),y.n.max(this.maxPageSize)])]})}}return e.\u0275fac=function(t){return new(t||e)(d.Kb(y.b))},e.\u0275cmp=d.Eb({type:e,selectors:[["app-headlines-form"]],outputs:{formChange:"formChange"},decls:57,vars:6,consts:[["validate","",3,"formGroup"],[1,"container"],[1,"row"],[1,"col-md-6"],[1,"form-group"],["for","topic"],["formControlName","topic","type","text","id","topic","name","topic","placeholder","Enter topic:",1,"form-control"],["for","category-select"],["value","general","formControlName","category","id","category-select",1,"form-control",3,"multiple"],["value","general","selected",""],["value","business"],["value","entertainment"],["value","gaming"],["value","music"],["value","politics"],["value","health-and-medical"],["value","science-and-nature"],["value","sport"],["value","technology"],["for","country-select"],["value","us","formControlName","country","id","country-select",1,"form-control",3,"multiple"],["value","us","selected",""],["value","ae"],["value","ar"],["value","rs"],["value","de"],["value","gb"],["value","hu"],["value","ro"],["for","page-size"],["type","number","formControlName","pageSize","id","page-size","placeholder","Page size:",1,"form-control",3,"min","max","value"]],template:function(e,t){1&e&&(d.Pb(0,"form",0),d.Pb(1,"div",1),d.Pb(2,"div",2),d.Pb(3,"div",3),d.Pb(4,"div",4),d.Pb(5,"label",5),d.yc(6,"Topic: "),d.Ob(),d.Lb(7,"input",6),d.Ob(),d.Pb(8,"div",4),d.Pb(9,"label",7),d.yc(10,"Category: "),d.Ob(),d.Pb(11,"select",8),d.Pb(12,"option",9),d.yc(13,"General"),d.Ob(),d.Pb(14,"option",10),d.yc(15,"Business"),d.Ob(),d.Pb(16,"option",11),d.yc(17,"Entertainment"),d.Ob(),d.Pb(18,"option",12),d.yc(19,"Gaming"),d.Ob(),d.Pb(20,"option",13),d.yc(21,"Music"),d.Ob(),d.Pb(22,"option",14),d.yc(23,"Politics"),d.Ob(),d.Pb(24,"option",15),d.yc(25,"Health and medical"),d.Ob(),d.Pb(26,"option",16),d.yc(27,"Science and nature"),d.Ob(),d.Pb(28,"option",17),d.yc(29,"Sport"),d.Ob(),d.Pb(30,"option",18),d.yc(31,"Technology"),d.Ob(),d.Ob(),d.Ob(),d.Ob(),d.Pb(32,"div",3),d.Pb(33,"div",4),d.Pb(34,"label",19),d.yc(35,"Country: "),d.Ob(),d.Pb(36,"select",20),d.Pb(37,"option",21),d.yc(38,"United States of America"),d.Ob(),d.Pb(39,"option",22),d.yc(40,"United Arab Emirates"),d.Ob(),d.Pb(41,"option",23),d.yc(42,"Argentina"),d.Ob(),d.Pb(43,"option",24),d.yc(44,"Serbia"),d.Ob(),d.Pb(45,"option",25),d.yc(46,"Germany"),d.Ob(),d.Pb(47,"option",26),d.yc(48,"United Kingdom of Great Britain and Northern Ireland"),d.Ob(),d.Pb(49,"option",27),d.yc(50,"Hungary"),d.Ob(),d.Pb(51,"option",28),d.yc(52,"Romania"),d.Ob(),d.Ob(),d.Ob(),d.Pb(53,"div",4),d.Pb(54,"label",29),d.yc(55,"Page size"),d.Ob(),d.Lb(56,"input",30),d.Ob(),d.Ob(),d.Ob(),d.Ob(),d.Ob()),2&e&&(d.ic("formGroup",t.form),d.xb(11),d.ic("multiple",t.multiple),d.xb(25),d.ic("multiple",t.multiple),d.xb(20),d.ic("min",t.minPageSize)("max",t.maxPageSize)("value",t.defaultPageSize))},directives:[y.p,y.i,y.d,y.a,y.h,y.c,y.m,y.j,y.o,y.k],styles:[""],changeDetection:0}),e})();var w=i("ofXK");let I=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=d.Eb({type:e,selectors:[["app-article-description"]],inputs:{article:"article",i:"i"},decls:22,vars:13,consts:[[1,"article"],[1,"text-center","d-flex","justify-content-between","align-items-center","mb-2"],[1,"badge","badge-dark","align-self-start"],[3,"href"],[1,"mb-2"],[1,"mb-2","lead"],[1,"btn","btn-outline-primary",3,"href"]],template:function(e,t){1&e&&(d.Pb(0,"div",0),d.Pb(1,"h5",1),d.Pb(2,"span",2),d.yc(3),d.dc(4,"number"),d.Ob(),d.Pb(5,"a",3),d.yc(6),d.Ob(),d.Ob(),d.Pb(7,"div",4),d.Pb(8,"p"),d.Pb(9,"strong"),d.yc(10),d.Ob(),d.Ob(),d.Pb(11,"p"),d.Pb(12,"strong"),d.yc(13),d.Ob(),d.Ob(),d.Pb(14,"p"),d.Pb(15,"strong"),d.yc(16),d.dc(17,"date"),d.Ob(),d.Ob(),d.Ob(),d.Pb(18,"p",5),d.yc(19),d.Ob(),d.Pb(20,"a",6),d.yc(21,"Read the article"),d.Ob(),d.Ob()),2&e&&(d.xb(3),d.zc(d.ec(4,8,t.i+1)),d.xb(2),d.ic("href",t.article.url,d.rc),d.xb(1),d.zc(t.article.title),d.xb(4),d.Ac("Source: ",t.article.source.name,""),d.xb(3),d.Ac("Author: ",t.article.author,""),d.xb(3),d.zc(d.fc(17,10,t.article.publishedAt,"mediumDate")),d.xb(3),d.zc(t.article.description),d.xb(1),d.ic("href",t.article.url,d.rc))},pipes:[w.f,w.e],styles:[""]}),e})();function z(e,t){if(1&e&&(d.Pb(0,"article",2),d.Pb(1,"div",3),d.Pb(2,"div",4),d.Pb(3,"a",5),d.Lb(4,"img",6),d.Ob(),d.Ob(),d.Pb(5,"div",7),d.Lb(6,"app-article-description",8),d.Ob(),d.Ob(),d.Lb(7,"hr"),d.Ob()),2&e){const e=t.$implicit,i=t.index;d.ic("id",e.title),d.xb(3),d.ic("href",e.url,d.rc),d.xb(1),d.ic("src",e.urlToImage,d.rc)("title",e.title)("alt",e.title),d.xb(2),d.ic("article",e)("i",i)}}let k=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=d.Eb({type:e,selectors:[["app-articles"]],inputs:{articles:"articles"},decls:2,vars:1,consts:[["id","articles"],["class","articles",3,"id",4,"ngFor","ngForOf"],[1,"articles",3,"id"],[1,"row"],[1,"col-md-7"],[3,"href"],["loading","lazy",1,"img-fluid","img-thumbnail","rounded","mx-auto","d-block","border","border-light",3,"src","title","alt"],[1,"col-md-5"],[3,"article","i"]],template:function(e,t){1&e&&(d.Pb(0,"section",0),d.wc(1,z,8,7,"article",1),d.Ob()),2&e&&(d.xb(1),d.ic("ngForOf",t.articles))},directives:[w.l,I],styles:[""]}),e})();function $(e,t){if(1&e){const e=d.Qb();d.Pb(0,"button",3),d.ac("click",(function(){return d.qc(e),d.cc().onDeacraseClick()})),d.yc(1," Load less "),d.Ob()}}function D(e,t){if(1&e){const e=d.Qb();d.Pb(0,"button",4),d.ac("click",(function(){return d.qc(e),d.cc().onIncreaseClick()})),d.yc(1," Load more "),d.Ob()}}let A=(()=>{class e{constructor(){this.pageIncrease=new d.n,this.pageDeacrease=new d.n}ngOnInit(){}onIncreaseClick(){this.pageIncrease.emit()}onDeacraseClick(){this.pageDeacrease.emit()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=d.Eb({type:e,selectors:[["app-page-buttons"]],inputs:{page:"page",numberOfArticles:"numberOfArticles",pageSize:"pageSize"},outputs:{pageIncrease:"pageIncrease",pageDeacrease:"pageDeacrease"},decls:3,vars:2,consts:[[1,"page-buttons"],["type","button","class","btn btn-primary float-left",3,"click",4,"ngIf"],["type","button","class","btn btn-primary float-right",3,"click",4,"ngIf"],["type","button",1,"btn","btn-primary","float-left",3,"click"],["type","button",1,"btn","btn-primary","float-right",3,"click"]],template:function(e,t){1&e&&(d.Pb(0,"div",0),d.wc(1,$,2,0,"button",1),d.wc(2,D,2,0,"button",2),d.Ob()),2&e&&(d.xb(1),d.ic("ngIf",t.page>1),d.xb(1),d.ic("ngIf",t.numberOfArticles===t.pageSize))},directives:[w.m],styles:[""]}),e})();function L(e,t){1&e&&(d.Pb(0,"h1"),d.yc(1,"Please wait"),d.Ob())}function M(e,t){if(1&e){const e=d.Qb();d.Nb(0),d.wc(1,L,2,0,"h1",5),d.Lb(2,"app-articles",6),d.Pb(3,"app-page-buttons",7),d.ac("pageIncrease",(function(){d.qc(e);const t=d.cc(),i=d.pc(1);return t.pageIncrease(i)}))("pageDeacrease",(function(){d.qc(e);const t=d.cc(),i=d.pc(1);return t.pageDecrease(i)})),d.Ob(),d.Mb()}if(2&e){const e=t.ngIf;d.xb(1),d.ic("ngIf",e.loading),d.xb(1),d.ic("articles",e.headlines.articles),d.xb(1),d.ic("page",e.searchCriteria.page)("pageSize",e.searchCriteria.pageSize)("numberOfArticles",e.headlines.articles.length)}}const N=[{path:"",component:(()=>{class e{constructor(e){this.headlinesFacade=e,this.vm$=e.vm$}onFormChange(e){this.headlinesFacade.updateSearchCriteria(e)}pageIncrease(e){e.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"}),this.headlinesFacade.pageIncrease()}pageDecrease(e){e.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"}),this.headlinesFacade.pageDecrease()}}return e.\u0275fac=function(t){return new(t||e)(d.Kb(O))},e.\u0275cmp=d.Eb({type:e,selectors:[["app-headlines"]],decls:7,vars:3,consts:[[1,"py-5"],["form",""],[1,"row"],[1,"col-xs-12","col-sm-10","offset-sm-1","col-md-6","offset-md-3"],[3,"formChange"],[4,"ngIf"],[3,"articles"],[3,"page","pageSize","numberOfArticles","pageIncrease","pageDeacrease"]],template:function(e,t){1&e&&(d.Pb(0,"section",0,1),d.Pb(2,"div",2),d.Pb(3,"div",3),d.Pb(4,"app-headlines-form",4),d.ac("formChange",(function(e){return t.onFormChange(e)})),d.Ob(),d.Ob(),d.Ob(),d.Ob(),d.wc(5,M,4,5,"ng-container",5),d.dc(6,"async")),2&e&&(d.xb(5),d.ic("ngIf",d.ec(6,1,t.vm$)))},directives:[j,w.m,k,A],pipes:[w.b],styles:['.sk-circle[_ngcontent-%COMP%]   .sk-child[_ngcontent-%COMP%]:before{background-color:#fff}img[_ngcontent-%COMP%]:before{content:"We\'re sorry, this image is broken :(";display:block;margin-bottom:10px}.article[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;height:100%}.article[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%], .article[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}'],changeDetection:0}),e})()}];let V=(()=>{class e{}return e.\u0275mod=d.Ib({type:e}),e.\u0275inj=d.Hb({factory:function(t){return new(t||e)},imports:[[a.g.forChild(N)],a.g]}),e})();var _=i("PCNd");let F=(()=>{class e{}return e.\u0275mod=d.Ib({type:e}),e.\u0275inj=d.Hb({factory:function(t){return new(t||e)},imports:[[_.a,V]]}),e})()}}]);